Добро пожаловать в мир интерактивности! Если до этого момента наше приложение было просто красивой картинкой, то сейчас оно начинает «оживать». Кнопки — это мост между пользователем и кодом.

Давай разберем это с позиции Senior-разработчика, заглянув в то, как Flutter обрабатывает нажатия и почему `const` так капризен.

---

### 1. Анатомия кнопок в Material Design

Автор выделил две категории: «Raised» (выпуклые) и «Text» (плоские). Во Flutter 3.0+ они называются:

- **`ElevatedButton`** (бывший RaisedButton): Кнопка с тенью и объемом.
- **`TextButton`** (бывший FlatButton): Просто текст, который реагирует на нажатие.
- **`OutlinedButton`**: Кнопка с рамкой, но без заливки.

**Что происходит под капотом:**
Все эти кнопки — это «обертки» над более низкоуровневым виджетом **`ButtonStyleButton`**. Когда ты нажимаешь на `TextButton`, Flutter не просто рисует текст, он создает область **`InkWell`**.

### 2. Splash Effect (Эффект брызг)

Автор заметил «синий всплеск» при нажатии.
**Инженерное объяснение:**
Это называется **Ink Splash**. Во Flutter за это отвечает специальный `InkSmartDrawer`. Когда происходит событие `onDown` (палец коснулся экрана), Flutter запускает анимацию расширяющегося круга на специальном слое (Material), который находится под текстом. Это дает пользователю визуальный отклик: «Да, система увидела твой клик».

---

### 3. Callback-функции и Анонимные функции

Свойство `onPressed` принимает функцию. Автор сравнил её с лямбдой в Python.

**Почему это важно «под капотом»:**
Тип этой функции — `VoidCallback`. Это просто функция, которая не принимает аргументов и ничего не возвращает (`void`).

- Если ты передашь в `onPressed` значение `null`, кнопка автоматически станет **серой и неактивной** (disabled). Flutter сам проверит: `if (onPressed == null) { /* рисуем серым */ }`.

**Пример кода:**

```dart
TextButton(
  // Анонимная функция: () { код }
  onPressed: () {
    print('Логика сработала!');
  },
  child: const Text('Нажми меня'),
)

```

---

### 4. Почему `TextButton` не может быть `const`?

Это отличный вопрос автора. Почему, если у кнопки есть конструктор `const`, мы не можем его использовать в данном случае?

**Профессиональное объяснение:**
Константы во Flutter должны быть известны **до запуска программы** (на этапе компиляции).
Когда ты пишешь `onPressed: () { print(...); }`, ты создаешь **замыкание (closure)**. В Dart функции — это объекты первого класса, и создание этой функции происходит в оперативной памяти (в куче/heap) во время выполнения программы.
Так как адрес этой функции в памяти заранее неизвестен, вся кнопка не может считаться «константной».

**Пример (как сделать константой):**

```dart
// Если вынести функцию в статическую область, теоретически можно,
// но на практике обработчики нажатий почти всегда динамические.
void myHandler() { print('Hi'); }

// Но чаще мы просто делаем константным только child:
TextButton(
  onPressed: myHandler,
  child: const Text('OK'), // Текст не меняется, он const
)

```

---

### 5. Инструментарий: Error Lens

Автор посоветовал расширение **Error Lens**. Это маст-хэв для профи.
**Почему это полезно:** Flutter очень строго следит за производительностью и чистотой кода (линтер). Error Lens позволяет тебе сразу видеть советы по оптимизации (например, «добавь const здесь»), не отвлекаясь от написания кода.

---

### 6. От себя: Разница между `child` и `label`

В некоторых кнопках (например, `ElevatedButton.icon`) вместо `child` используется связка `icon` и `label`.
**Совет профи:** Если тебе нужно добавить иконку к кнопке, не пытайся засунуть `Row` (ряд) внутрь `child` самостоятельно. Используй специальный конструктор `.icon`. Он автоматически настроит правильные отступы между иконкой и текстом согласно гайдлайнам Material Design.

**Пример кода:**

```dart
ElevatedButton.icon(
  onPressed: () {},
  icon: const Icon(Icons.send),
  label: const Text('Отправить'),
)

```

### Резюме урока:

1. **Кнопка** — это не только визуал, но и обработка жестов.
2. **`onPressed`** — это «мозг» кнопки. Нет функции — кнопка «мертва» (disabled).
3. **`print`** — твой лучший друг для отладки, пока мы не научились обновлять экран.
